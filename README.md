# groovyOtus2024
Для домашних заданий по groovy
# hw-1
###### 1. Создан модуль hw01-gradle
###### 2. Добавлена сборка "толстого-jar" в файл build.gradle.
###### 3. Создан "толстый-jar": \hw01-gradle\build\libs
###### 4. В модуле добавbk groovy-скрипт HelloOtus. В этом файле сделаy вызов метода из guava:  Lists.newArrayList
###### 5. Создан пайплайн в github actions, который содержит сборку проекта и запускается при PR и при merge в ветку main

# hw-2
##### Класс Banknote:
- Представляет банкноту с определенным номиналом.
- Переопределяет оператор сложения (+) для работы с номиналами, а также оператор сравнения (==).


##### Класс ATM:
- Имеет хранилище банкнот в виде карты Map<Integer, List<Banknote>>, где ключ — номинал, а значение — список банкнот этого номинала.

##### Методы Класс ATM:
- deposit(Banknote banknote) — принимает банкноту и помещает её в соответствующую ячейку.
withdraw(int amount) — пытается выдать запрошенную сумму минимальным количеством банкнот. Если сумму выдать невозможно (например, недостаточно мелких банкнот), возвращает ошибку.
- getBalance() — возвращает общую сумму средств, доступных в банкомате.
- displayATMState() — выводит текущее состояние ATM: количество банкнот каждого номинала и общий баланс.


##### Модульные тесты
Для написания модульных тестов использовал библиотеку Spock. 
Она предоставляет удобный синтаксис и мощные инструменты для тестирования.
##### Описание тестов:
- test deposit functionality: Проверяет, что банкомат правильно принимает и сохраняет банкноты разного номинала, а также корректно обновляет баланс.
- test withdraw functionality with exact amount: Проверяет, что банкомат корректно выдает нужную сумму минимальным количеством банкнот и обновляет баланс после операции.
- test withdraw functionality when amount cannot be matched: Проверяет ситуацию, когда банкомат не может выдать точную сумму — ожидание ошибки.
- test withdraw functionality when ATM has insufficient funds: Проверяет, что банкомат не может выдать больше, чем у него есть.
- test get balance after multiple deposits: Проверяет баланс после внесения нескольких банкнот.
- test display ATM state: Проверяет корректность отображения состояния банкомата (количество банкнот и баланс).

###### Чтобы встроить написанные модульные тесты с использованием Spock в проект, выполнил следующие шаги:
- В build.gradle добавил нужные зависимости
- Поместил тесты в в папку проект test\groovy\ATMTest.groovy
- В build.gradle добавил таску для автоматизации процесса: тесты запускаются после сборки проекта автоматом:
  tasks.withType(Test) {
    testLogging {
        events "passed", "skipped", "failed"}}
